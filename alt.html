<!doctype html>
<html>
    <head>
        <meta charset="UTF-8">
        <title>countdown clock</title>
        <link rel="stylesheet" type="text/css" href="css.css" />
        <script src="http://code.jquery.com/jquery-2.1.4.min.js"></script>
        <style>:-webkit-full-screen {
  /* properties */
}

:-moz-full-screen {
  /* properties */
}

:-ms-fullscreen {
  /* properties */
}

:full-screen { /*pre-spec */
  /* properties */
}

:fullscreen { /* spec */
  /* properties */
}

/* deeper elements */
:-webkit-full-screen video {
  width: 100%;
  height: 100%;
}

/* styling the backdrop*/
::backdrop {
  /* properties */
}
::-ms-backdrop {
  /* properties */
}</style>
    </head>
    <body>
        <p style="color: white;"></p>
        <div id="clock" class="clock"></div>
            <script type="text/javascript">
                var houres;
                var minute;
                var seconds;
                var show = 1;
                var neg = 0;
                var out = 0;
                
                $.get( "klokke.php", function( data ) {
                    houres = data.hour;
                    minute = data.minute;
                    seconds = data.seconds;
                    show = data.show;
                    out = data.out;
                }, "json" );
                                
                 window.setInterval(function(){ 
                     $.get( "klokke.php", function( data ) {
                         houres = data.hour;
                         minute = data.minute;
                         seconds = data.seconds;
                         show = data.show;
                         out = data.out;
                     }, "json" );
                 }, 3000);
            
            
            
            var myVar=setInterval(function () {myTimer()}, 1000);
            //myTimer();
            function myTimer()
            {
                if(minute < 5)
                {
                    document.getElementById("clock").style.color = "red";                                                       
                }
                else
                {
                    document.getElementById("clock").style.color = "white";                                                       
                }
                
                if(minute > -5 && out != 1)
                {
                        seconds = seconds -1;
                    
                        if(seconds == -1){
                            minute = minute - 1;
                            seconds = 59;
                        }
                        
                    if(minute == -1)
                    {
                            houres = houres -1;
                            minute = 59;
                    }
                    
                    else if(houres != 0)
                    {
                        if(Math.abs(seconds) >= 10)
                        {
                            if(Math.abs(minute) <= 9)
                            {
                                if(show == 1)
                                {
                                    document.getElementById("clock").innerHTML= houres + ":0" + Math.abs(minute) + ":" + Math.abs(seconds);
                                }
                                else
                                {
                                    document.getElementById("clock").innerHTML= houres + ":0" + Math.abs(minute);   
                                }
                            }
                            else
                            {
                                if(show == 1)
                                {
                                    document.getElementById("clock").innerHTML= houres +":" + Math.abs(minute) + ":" + Math.abs(seconds);
                                }
                                else
                                {
                                    document.getElementById("clock").innerHTML= houres + ":" + Math.abs(minute);   
                                }
                            }
                        }
                        else
                        {
                            if(minute <= 9)
                            {
                                if(show == 1)
                                {
                                document.getElementById("clock").innerHTML=houres + ":0" + Math.abs(minute) + ":0" + Math.abs(seconds);
                                }
                                else
                                {
                                    document.getElementById("clock").innerHTML=houres + ":0" + Math.abs(minute);
                                }
                            }
                            else
                            {
                                if(show == 1)
                                {
                                    document.getElementById("clock").innerHTML=houres + ":" + Math.abs(minute) + ":0" + Math.abs(seconds);
                                }
                                else
                                {
                                    document.getElementById("clock").innerHTML=houres + ":"+ Math.abs(minute);
                                }
                            }
                        }
                    }
                    else
                    {
                        
                        if(Math.abs(seconds) >= 10)
                        {
                            if(Math.abs(minute) <= 9)
                            {
                                if(show == 1)
                                {
                                    document.getElementById("clock").innerHTML= "0" + minute + ":" + Math.abs(seconds);
                                }
                                else
                                {
                                    document.getElementById("clock").innerHTML= "0" + minute;
                                }
                                
                            }
                            else
                            {
                                if(show == 1)
                                {
                                    document.getElementById("clock").innerHTML= minute + ":" + Math.abs(seconds);
                                }
                                else
                                {
                                    document.getElementById("clock").innerHTML= minute;
                                }
                            }
                        }
                        else
                        {
                            if(Math.abs(minute) <= 9)
                            {
                                if(show == 1)
                                {
                                    document.getElementById("clock").innerHTML="0" + minute + ":0" + Math.abs(seconds);
                                }
                                else
                                {
                                    document.getElementById("clock").innerHTML="0" + minute;
                                }
                                    
                            }
                            else
                            {
                                if(show == 1)
                                {
                                    document.getElementById("clock").innerHTML=minute + ":0" + Math.abs(seconds);
                                }
                                else
                                {
                                    document.getElementById("clock").innerHTML=minute;
                                }
                            }
                        }
                    }
                }
                else
                {
                    document.getElementById("clock").innerHTML="Tiden er ute!";
                }
            }
        </script>
        <!--Fullscreen-->
        <script>
        // Find the right method, call on correct element
            function launchIntoFullscreen(element) {
                if(element.requestFullscreen) {
                    element.requestFullscreen();
                } else if(element.mozRequestFullScreen) {
                    element.mozRequestFullScreen();
                } else if(element.webkitRequestFullscreen) {
                    element.webkitRequestFullscreen();
                } else if(element.msRequestFullscreen) {
                    element.msRequestFullscreen();
                }
            }

        // Launch fullscreen for browsers that support it!
        launchIntoFullscreen(document.documentElement);
        </script>
        <!--End Fullscreen-->
    </body>
</html>
